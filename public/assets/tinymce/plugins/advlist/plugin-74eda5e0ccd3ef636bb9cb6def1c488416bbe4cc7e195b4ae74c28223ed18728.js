tinymce.PluginManager.add("advlist",function(e){function t(t){return e.$.contains(e.getBody(),t)}function n(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&t(e)}function i(e,t){var n=[];return t&&tinymce.each(t.split(/[ ,]/),function(e){n.push({text:e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}),data:"default"==e?"":e})}),n}function r(t,n){e.undoManager.transact(function(){var i,r=e.dom,o=e.selection;if(i=r.getParent(o.getNode(),"ol,ul"),!i||i.nodeName!=t||n===!1){var a={"list-style-type":n?n:""};e.execCommand("UL"==t?"InsertUnorderedList":"InsertOrderedList",!1,a)}i=r.getParent(o.getNode(),"ol,ul"),i&&tinymce.util.Tools.each(r.select("ol,ul",i).concat([i]),function(e){e.nodeName!==t&&n!==!1&&(e=r.rename(e,t)),r.setStyle(e,"listStyleType",n?n:null),e.removeAttribute("data-mce-style")}),e.focus()})}function o(t){var n=e.dom.getStyle(e.dom.getParent(e.selection.getNode(),"ol,ul"),"listStyleType")||"";t.control.items().each(function(e){e.active(e.settings.data===n)})}var a,s,l=function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return tinymce.util.Tools.inArray(n.split(/[ ,]/),t)!==-1};a=i("OL",e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),s=i("UL",e.getParam("advlist_bullet_styles","default,circle,disc,square"));var c=function(t){return function(){var i=this;e.on("NodeChange",function(e){var r=tinymce.util.Tools.grep(e.parents,n);i.active(r.length>0&&r[0].nodeName===t)})}};l(e,"lists")&&(e.addCommand("ApplyUnorderedListStyle",function(e,t){r("UL",t["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(e,t){r("OL",t["list-style-type"])}),e.addButton("numlist",{type:a.length>0?"splitbutton":"button",tooltip:"Numbered list",menu:a,onPostRender:c("OL"),onshow:o,onselect:function(e){r("OL",e.control.settings.data)},onclick:function(){r("OL",!1)}}),e.addButton("bullist",{type:s.length>0?"splitbutton":"button",tooltip:"Bullet list",onPostRender:c("UL"),menu:s,onshow:o,onselect:function(e){r("UL",e.control.settings.data)},onclick:function(){r("UL",!1)}}))});