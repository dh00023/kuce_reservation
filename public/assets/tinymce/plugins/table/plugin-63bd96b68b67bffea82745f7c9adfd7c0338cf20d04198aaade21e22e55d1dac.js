!function(e,t){"use strict";function n(e,t){for(var n,i=[],a=0;a<e.length;++a){if(n=o[e[a]]||r(e[a]),!n)throw"module definition dependecy not found: "+e[a];i.push(n)}t.apply(null,i)}function i(e,i,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";n(i,function(){o[e]=r.apply(null,arguments)})}function r(t){for(var n=e,i=t.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}var o={};i("tinymce/tableplugin/Utils",["tinymce/Env"],function(e){function t(t){(!e.ie||e.ie>9)&&(t.hasChildNodes()||(t.innerHTML='<br data-mce-bogus="1" />'))}var n=function(e){return function(t,n){t&&(n=parseInt(n,10),1===n||0===n?t.removeAttribute(e,1):t.setAttribute(e,n,1))}},i=function(e){return function(t){return parseInt(t.getAttribute(e)||1,10)}};return{setColSpan:n("colSpan"),setRowSpan:n("rowspan"),getColSpan:i("colSpan"),getRowSpan:i("rowSpan"),setSpanVal:function(e,t,i){n(t)(e,i)},getSpanVal:function(e,t){return i(t)(e)},paddCell:t}}),i("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,t){var n=function(e,t,n){return e[n]?e[n][t]:null},i=function(e,t,i){var r=n(e,t,i);return r?r.elm:null},r=function(e,t,r,o){var a,s,l=0,c=i(e,t,r);for(a=r;(o>0?a<e.length:a>=0)&&(s=n(e,t,a),c===s.elm);a+=o)l++;return l},o=function(e,t,n){for(var i,r=e[n],o=t;o<r.length;o++)if(i=r[o],i.real)return i.elm;return null},a=function(e,n){for(var i,o=[],a=e[n],s=0;s<a.length;s++)i=a[s],o.push({elm:i.elm,above:r(e,s,n,-1)-1,below:r(e,s,n,1)-1}),s+=t.getColSpan(i.elm)-1;return o},s=function(e,n){var i=e.elm.ownerDocument,r=i.createElement("td");return t.setColSpan(r,t.getColSpan(e.elm)),t.setRowSpan(r,n),t.paddCell(r),r},l=function(e,t,n,i){var r=o(e,n+1,i);r?r.parentNode.insertBefore(t,r):(r=o(e,0,i),r.parentNode.appendChild(t))},c=function(e,n,i,r){if(0!==n.above){t.setRowSpan(n.elm,n.above);var o=s(n,n.below+1);return l(e,o,i,r),o}return null},u=function(e,n,i,r){if(0!==n.below){t.setRowSpan(n.elm,n.above+1);var o=s(n,n.below);return l(e,o,i,r+1),o}return null},d=function(t,n,r,o){var s=a(t,r),l=i(t,n,r).parentNode,d=[];return e.each(s,function(e,n){var i=o?c(t,e,n,r):u(t,e,n,r);null!==i&&d.push(d)}),{cells:d,row:l}};return{splitAt:d}}),i("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(e,n,i,r){var o=e.each,a=i.getSpanVal,s=i.setSpanVal;return function(l,c,u){function d(){l.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function f(e){return e===l.getBody()}function h(t,n){return t?(n=e.map(n.split(","),function(e){return e.toLowerCase()}),e.grep(t.childNodes,function(t){return e.inArray(n,t.nodeName.toLowerCase())!==-1})):[]}function p(){var e=0;J=[],Z=0,o(["thead","tbody","tfoot"],function(t){var n=h(c,t)[0],i=h(n,"tr");o(i,function(n,i){i+=e,o(h(n,"td,th"),function(e,n){var r,o,s,l;if(J[i])for(;J[i][n];)n++;for(s=a(e,"rowspan"),l=a(e,"colspan"),o=i;o<i+s;o++)for(J[o]||(J[o]=[]),r=n;r<n+l;r++)J[o][r]={part:t,real:o==i&&r==n,elm:e,rowspan:s,colspan:l};Z=Math.max(Z,n+1)})}),e+=i.length})}function m(e){return l.fire("newrow",{node:e}),e}function g(e){return l.fire("newcell",{node:e}),e}function v(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function y(e,t){var n;if(n=J[t])return n[e]}function b(e,t){return e[t]?e[t]:null}function w(e,t){for(var n=[],i=0;i<e.length;i++)n.push(y(t,i));return n}function C(e){return e&&(!!ie.getAttrib(e.elm,"data-mce-selected")||e==u)}function x(){var e=[];return o(c.rows,function(t){o(t.cells,function(n){if(ie.getAttrib(n,"data-mce-selected")||u&&n==u.elm)return e.push(t),!1})}),e}function _(){var e=0;return o(J,function(t){if(o(t,function(t){C(t)&&e++}),e)return!1}),e}function S(){var e=ie.createRng();f(c)||(e.setStartAfter(c),e.setEndAfter(c),ne.setRng(e),ie.remove(c))}function k(t){var r,a={};return l.settings.table_clone_elements!==!1&&(a=e.makeMap((l.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(t,function(e){var i;if(3==e.nodeType)return o(ie.getParents(e.parentNode,null,t).reverse(),function(e){a[e.nodeName]&&(e=v(e,!1),r?i&&i.appendChild(e):r=i=e,i=e)}),i&&(i.innerHTML=n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),t=v(t,!1),g(t),s(t,"rowSpan",1),s(t,"colSpan",1),r?t.appendChild(r):i.paddCell(t),t}function E(){var e,t=ie.createRng();return o(ie.select("tr",c),function(e){0===e.cells.length&&ie.remove(e)}),0===ie.select("tr",c).length?(t.setStartBefore(c),t.setEndBefore(c),ne.setRng(t),void ie.remove(c)):(o(ie.select("thead,tbody,tfoot",c),function(e){0===e.rows.length&&ie.remove(e)}),p(),void(ee&&(e=J[Math.min(J.length-1,ee.y)],e&&(ne.select(e[Math.min(e.length-1,ee.x)].elm,!0),ne.collapse(!0)))))}function T(e,t,n,i){var r,o,a,s,l;for(r=J[t][e].elm.parentNode,a=1;a<=n;a++)if(r=ie.getNext(r,"tr")){for(o=e;o>=0;o--)if(l=J[t+a][o].elm,l.parentNode==r){for(s=1;s<=i;s++)ie.insertAfter(k(l),l);break}if(o==-1)for(s=1;s<=i;s++)r.insertBefore(k(r.cells[0]),r.cells[0])}}function N(){o(J,function(e,t){o(e,function(e,n){var i,r,o;if(C(e)&&(e=e.elm,i=a(e,"colspan"),r=a(e,"rowspan"),i>1||r>1)){for(s(e,"rowSpan",1),s(e,"colSpan",1),o=0;o<i-1;o++)ie.insertAfter(k(e),e);T(n,t,r-1,i)}})})}function D(e,t,n){for(var i=[],r=0;r<e.length;r++)(r<t||r>n)&&i.push(e[r]);return i}function R(t){return e.grep(t,function(e){return e.real===!1})}function A(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].elm;t[t.length-1]!==i&&t.push(i)}return t}function M(t,n,r,o,a){var s=0;if(a-r<1)return 0;for(var l=r+1;l<=a;l++){var c=D(b(t,l),n,o),u=R(c);c.length===u.length&&(e.each(A(u),function(e){i.setRowSpan(e,i.getRowSpan(e)-1)}),s++)}return s}function B(t,n,r,o,a){var s=0;if(o-n<1)return 0;for(var l=n+1;l<=o;l++){var c=D(w(t,l),r,a),u=R(c);c.length===u.length&&(e.each(A(u),function(e){i.setColSpan(e,i.getColSpan(e)-1)}),s++)}return s}function P(t,n,i){var r,a,l,c,u,d,f,h,m,g,v,b,w;if(t?(r=q(t),a=r.x,l=r.y,c=a+(n-1),u=l+(i-1)):(ee=te=null,o(J,function(e,t){o(e,function(e,n){C(e)&&(ee||(ee={x:n,y:t}),te={x:n,y:t})})}),ee&&(a=ee.x,l=ee.y,c=te.x,u=te.y)),h=y(a,l),m=y(c,u),h&&m&&h.part==m.part){N(),p(),b=M(J,a,l,c,u),w=B(J,a,l,c,u),h=y(a,l).elm;var x=c-a-w+1,_=u-l-b+1;for(x===Z&&_===J.length&&(x=1,_=1),x===Z&&_>1&&(_=1),s(h,"colSpan",x),s(h,"rowSpan",_),f=l;f<=u;f++)for(d=a;d<=c;d++)J[f]&&J[f][d]&&(t=J[f][d].elm,t!=h&&(g=e.grep(t.childNodes),o(g,function(e){h.appendChild(e)}),g.length&&(g=e.grep(h.childNodes),v=0,o(g,function(e){"BR"==e.nodeName&&v++<g.length-1&&h.removeChild(e)})),ie.remove(t)));E()}}function I(e){var n,i,r,l,c,u,d,f,h,p;if(o(J,function(i,r){if(o(i,function(t){if(C(t)&&(t=t.elm,c=t.parentNode,u=m(v(c,!1)),n=r,e))return!1}),e)return n===t}),n!==t){for(l=0,p=0;l<J[0].length;l+=p)if(J[n][l]&&(i=J[n][l].elm,p=a(i,"colspan"),i!=r)){if(e){if(n>0&&J[n-1][l]&&(f=J[n-1][l].elm,h=a(f,"rowSpan"),h>1)){s(f,"rowSpan",h+1);continue}}else if(h=a(i,"rowspan"),h>1){s(i,"rowSpan",h+1);continue}d=k(i),s(d,"colSpan",i.colSpan),u.appendChild(d),r=i}u.hasChildNodes()&&(e?c.parentNode.insertBefore(u,c):ie.insertAfter(u,c))}}function H(e,t){t=t||x().length||1;for(var n=0;n<t;n++)I(e)}function L(e){var n,i;o(J,function(i){if(o(i,function(t,i){if(C(t)&&(n=i,e))return!1}),e)return n===t}),o(J,function(t,r){var o,l,c;t[n]&&(o=t[n].elm,o!=i&&(c=a(o,"colspan"),l=a(o,"rowspan"),1==c?e?(o.parentNode.insertBefore(k(o),o),T(n,r,l-1,c)):(ie.insertAfter(k(o),o),T(n,r,l-1,c)):s(o,"colSpan",o.colSpan+1),i=o))})}function O(e,t){t=t||_()||1;for(var n=0;n<t;n++)L(e)}function F(t){return e.grep(z(t),C)}function z(e){var t=[];return o(e,function(e){o(e,function(e){t.push(e)})}),t}function W(){var t=[];if(f(c)){if(1==J[0].length)return;if(F(J).length==z(J).length)return}o(J,function(n){o(n,function(n,i){C(n)&&e.inArray(t,i)===-1&&(o(J,function(e){var t,n=e[i].elm;t=a(n,"colSpan"),t>1?s(n,"colSpan",t-1):ie.remove(n)}),t.push(i))})}),E()}function U(){function e(e){var t,n;o(e.cells,function(e){var n=a(e,"rowSpan");n>1&&(s(e,"rowSpan",n-1),t=q(e),T(t.x,t.y,1,1))}),t=q(e.cells[0]),o(J[t.y],function(e){var t;e=e.elm,e!=n&&(t=a(e,"rowSpan"),t<=1?ie.remove(e):s(e,"rowSpan",t-1),n=e)})}var t;t=x(),f(c)&&t.length==c.rows.length||(o(t.reverse(),function(t){e(t)}),E())}function j(){var e=x();if(!f(c)||e.length!=c.rows.length)return ie.remove(e),E(),e}function $(){var e=x();return o(e,function(t,n){e[n]=v(t,!0)}),e}function V(t,n){var i,a,l;t&&(i=r.splitAt(J,ee.x,ee.y,n),a=i.row,e.each(i.cells,g),l=e.map(t,function(e){return e.cloneNode(!0)}),n||l.reverse(),o(l,function(e){var t,i,r=e.cells.length;for(m(e),t=0;t<r;t++)i=e.cells[t],g(i),s(i,"colSpan",1),s(i,"rowSpan",1);for(t=r;t<Z;t++)e.appendChild(g(k(e.cells[r-1])));for(t=Z;t<r;t++)ie.remove(e.cells[t]);n?a.parentNode.insertBefore(e,a):ie.insertAfter(e,a)}),d())}function q(e){var t;return o(J,function(n,i){return o(n,function(n,r){if(n.elm==e)return t={x:r,y:i},!1}),!t}),t}function Y(e){ee=q(e)}function G(){var e,t;return e=t=0,o(J,function(n,i){o(n,function(n,r){var o,a;C(n)&&(n=J[i][r],r>e&&(e=r),i>t&&(t=i),n.real&&(o=n.colspan-1,a=n.rowspan-1,o&&r+o>e&&(e=r+o),a&&i+a>t&&(t=i+a)))})}),{x:e,y:t}}function K(e){var t,n,i,r,o,a,s,l,c,u;if(te=q(e),ee&&te){for(t=Math.min(ee.x,te.x),n=Math.min(ee.y,te.y),i=Math.max(ee.x,te.x),r=Math.max(ee.y,te.y),o=i,a=r,u=n;u<=r;u++)for(c=t;c<=i;c++)e=J[u][c],e.real&&(s=e.colspan-1,l=e.rowspan-1,s&&c+s>o&&(o=c+s),l&&u+l>a&&(a=u+l));for(d(),u=n;u<=a;u++)for(c=t;c<=o;c++)J[u][c]&&ie.setAttrib(J[u][c].elm,"data-mce-selected","1")}}function X(e,t){var n,i,r;n=q(e),i=n.y*Z+n.x;do{if(i+=t,r=y(i%Z,Math.floor(i/Z)),!r)break;if(r.elm!=e)return ne.select(r.elm,!0),ie.isEmpty(r.elm)&&ne.collapse(!0),!0}while(r.elm==e);return!1}function Q(t){if(ee){var n=r.splitAt(J,ee.x,ee.y,t);e.each(n.cells,g)}}var J,Z,ee,te,ne=l.selection,ie=ne.dom;c=c||ie.getParent(ne.getStart(!0),"table"),p(),u=u||ie.getParent(ne.getStart(!0),"th,td"),u&&(ee=q(u),te=G(),u=y(ee.x,ee.y)),e.extend(this,{deleteTable:S,split:N,merge:P,insertRow:I,insertRows:H,insertCol:L,insertCols:O,splitCols:Q,deleteCols:W,deleteRows:U,cutRows:j,copyRows:$,pasteRows:V,getPos:q,setStartCell:Y,setEndCell:K,moveRelIdx:X,refresh:p})}}),i("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,t,n,i,r){var o=i.each,a=r.getSpanVal;return function(s){function l(){function n(n){function i(e,t){var i=e?"previousSibling":"nextSibling",o=s.dom.getParent(t,"tr"),a=o[i];if(a)return v(s,t,a,e),n.preventDefault(),!0;var l=s.dom.getParent(o,"table"),d=o.parentNode,f=d.nodeName.toLowerCase();if("tbody"===f||f===(e?"tfoot":"thead")){var h=r(e,l,d,"tbody");if(null!==h)return c(e,h,t)}return u(e,o,i,l)}function r(e,t,n,i){var r=s.dom.select(">"+i,t),o=r.indexOf(n);if(e&&0===o||!e&&o===r.length-1)return l(e,t);if(o===-1){var a="thead"===n.tagName.toLowerCase()?0:r.length-1;return r[a]}return r[o+(e?-1:1)]}function l(e,t){var n=e?"thead":"tfoot",i=s.dom.select(">"+n,t);return 0!==i.length?i[0]:null}function c(e,t,i){var r=d(t,e);return r&&v(s,i,r,e),n.preventDefault(),!0}function u(e,t,r,o){var a=o[r];if(a)return f(a),!0;var l=s.dom.getParent(o,"td,th");if(l)return i(e,l,n);var c=d(t,!e);return f(c),n.preventDefault(),!1}function d(e,t){var n=e&&e[t?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?s.dom.getParent(n,"td,th"):n}function f(e){s.selection.setCursorLocation(e,0)}function h(){return w==e.UP||w==e.DOWN}function p(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return null!==n}function m(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=a(n,"colspan");return t}function g(e,t){var n=0,i=0;return o(e.children,function(e,r){if(n+=a(e,"colspan"),i=r,n>t)return!1}),i}function v(e,t,n,i){var r=m(s.dom.getParent(t,"td,th")),o=g(n,r),a=n.childNodes[o],l=d(a,i);f(l||a)}function y(e){var t=s.selection.getNode(),n=s.dom.getParent(t,"td,th"),i=s.dom.getParent(e,"td,th");return n&&n!==i&&b(n,i)}function b(e,t){return s.dom.getParent(e,"TABLE")===s.dom.getParent(t,"TABLE")}var w=n.keyCode;if(h()&&p(s)){var C=s.selection.getNode();t.setEditorTimeout(s,function(){y(C)&&i(!n.shiftKey&&w===e.UP,C,n)},0)}}s.on("KeyDown",function(e){n(e)})}function c(){function e(e,t){var n,i=t.ownerDocument,r=i.createRange();return r.setStartBefore(t),r.setEnd(e.endContainer,e.endOffset),n=i.createElement("body"),n.appendChild(r.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}s.on("KeyDown",function(t){var n,i,r=s.dom;37!=t.keyCode&&38!=t.keyCode||(n=s.selection.getRng(),i=r.getParent(n.startContainer,"table"),i&&s.getBody().firstChild==i&&e(n,i)&&(n=r.createRng(),n.setStartBefore(i),n.setEndBefore(i),s.selection.setRng(n),t.preventDefault()))})}function u(){s.on("KeyDown SetContent VisualAid",function(){var e;for(e=s.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(s.settings.forced_root_block?s.dom.add(s.getBody(),s.settings.forced_root_block,s.settings.forced_root_block_attrs,n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):s.dom.add(s.getBody(),"br",{"data-mce-bogus":"1"}))}),s.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||"\xa0"==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&s.dom.remove(t)})}function d(){function e(e,t,n,i){var r,o,a,s=3,l=e.dom.getParent(t.startContainer,"TABLE");return l&&(r=l.parentNode),o=t.startContainer.nodeType==s&&0===t.startOffset&&0===t.endOffset&&i&&("TR"==n.nodeName||n==r),a=("TD"==n.nodeName||"TH"==n.nodeName)&&!i,o||a}function t(){var t=s.selection.getRng(),n=s.selection.getNode(),i=s.dom.getParent(t.startContainer,"TD,TH");if(e(s,t,n,i)){i||(i=n);for(var r=i.lastChild;r.lastChild;)r=r.lastChild;3==r.nodeType&&(t.setEnd(r,r.data.length),s.selection.setRng(t))}}s.on("KeyDown",function(){t()}),s.on("MouseDown",function(e){2!=e.button&&t()})}function f(){function t(e){s.selection.select(e,!0),s.selection.collapse(!0)}function n(e){s.$(e).empty(),r.paddCell(e)}s.on("keydown",function(r){if((r.keyCode==e.DELETE||r.keyCode==e.BACKSPACE)&&!r.isDefaultPrevented()){var o,a,l,c;if(o=s.dom.getParent(s.selection.getStart(),"table")){if(a=s.dom.select("td,th",o),l=i.grep(a,function(e){return!!s.dom.getAttrib(e,"data-mce-selected")}),0===l.length)return c=s.dom.getParent(s.selection.getStart(),"td,th"),void(s.selection.isCollapsed()&&c&&s.dom.isEmpty(c)&&(r.preventDefault(),n(c),t(c)));r.preventDefault(),s.undoManager.transact(function(){a.length==l.length?s.execCommand("mceTableDelete"):(i.each(l,n),t(l[0]))})}}})}function h(){var t=function(e){return e&&"CAPTION"==e.nodeName&&"TABLE"==e.parentNode.nodeName},i=function(e,t){var n=s.selection.getRng(),i=e.ownerDocument.createTextNode("\xa0");n.startOffset?e.insertBefore(i,e.firstChild):e.appendChild(i),t&&(s.selection.select(i,!0),s.selection.collapse(!0))},r=function(t){return(t.keyCode==e.DELETE||t.keyCode==e.BACKSPACE)&&!t.isDefaultPrevented()},o=function(e){return e.firstChild===e.lastChild&&e.firstChild},a=function(e){return e&&3===e.nodeType},l=function(e){var t=o(e);return a(t)&&1===t.data.length?t.data:null},c=function(e){var t=o(e),n=l(e);return t&&!a(t)||n&&!d(n)},u=function(e){return s.dom.isEmpty(e)||d(l(e))},d=function(e){return"\xa0"===e};s.on("keydown",function(e){if(r(e)){var o=s.dom.getParent(s.selection.getStart(),"caption");t(o)&&(n.ie&&(s.selection.isCollapsed()?c(o)&&i(o):(s.undoManager.transact(function(){s.execCommand("Delete"),u(o)&&i(o,!0)}),e.preventDefault())),u(o)&&e.preventDefault())}})}f(),h(),n.webkit&&(l(),d()),n.gecko&&(c(),u()),n.ie>9&&(c(),u())}}),i("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(e,t,n){return function(i,r){function o(e){i.getBody().style.webkitUserSelect="",(e||m)&&(i.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),m=!1)}function a(e,t){return!(!e||!t)&&e===p.getParent(t,"table")}function s(t){var n,o,s=t.target;if(!f&&!h&&s!==d&&(d=s,u&&c)){if(o=p.getParent(s,"td,th"),a(u,o)||(o=p.getParent(u,"td,th")),c===o&&!m)return;if(r(!0),a(u,o)){t.preventDefault(),l||(l=new e(i,u,c),i.getBody().style.webkitUserSelect="none"),l.setEndCell(o),m=!0,n=i.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(e){}}}}var l,c,u,d,f,h,p=i.dom,m=!0,g=function(){c=l=u=d=null,r(!1)};return i.on("SelectionChange",function(e){m&&e.stopImmediatePropagation()},!0),i.on("MouseDown",function(e){2==e.button||f||h||(o(),c=p.getParent(e.target,"td,th"),u=p.getParent(c,"table"))}),i.on("mouseover",s),i.on("remove",function(){p.unbind(i.getDoc(),"mouseover",s),o()}),i.on("MouseUp",function(){function e(e,i){var o=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(i?r.setStart(e,0):r.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(i?r.setStartBefore(e):r.setEndBefore(e))}while(e=i?o.next():o.prev())}var r,o,a,s,u,d=i.selection;if(c){if(l&&(i.getBody().style.webkitUserSelect=""),o=p.select("td[data-mce-selected],th[data-mce-selected]"),o.length>0){r=p.createRng(),s=o[0],r.setStartBefore(s),r.setEndAfter(s),e(s,1),a=new t(s,p.getParent(o[0],"table"));do if("TD"==s.nodeName||"TH"==s.nodeName){if(!p.getAttrib(s,"data-mce-selected"))break;u=s}while(s=a.next());e(u),d.setRng(r)}i.nodeChanged(),g()}}),i.on("KeyUp Drop SetContent",function(e){o("setcontent"==e.type),g(),f=!1}),i.on("ObjectResizeStart ObjectResized",function(e){f="objectresized"!=e.type}),i.on("dragstart",function(){h=!0}),i.on("drop dragend",function(){h=!1}),{clear:o}}}),i("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each;return function(i){function r(){var e=i.settings.color_picker_callback;if(e)return function(){var t=this;e.call(i,function(e){t.value(e).fire("change")},t.value())}}function o(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){d(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:r()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:r()}]}]}}function a(e){return e?e.replace(/px$/,""):""}function s(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function l(e){n("left center right".split(" "),function(t){i.formatter.remove("align"+t,{},e)})}function c(e){n("top middle bottom".split(" "),function(t){i.formatter.remove("valign"+t,{},e)})}function u(t,n,i){function r(t,i){return i=i||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=r(e.menu):(t.value=e.value,n&&n(t)),i.push(t)}),i}return r(t,i||[])}function d(e,t,n){var i=t.toJSON(),r=e.parseStyle(i.style);n?(t.find("#borderColor").value(r["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(r["background-color"]||"")[0].fire("change")):(r["border-color"]=i.borderColor,r["background-color"]=i.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(r))))}function f(e,t,n){var i=e.parseStyle(e.getAttrib(n,"style"));i["border-color"]&&(t.borderColor=i["border-color"]),i["background-color"]&&(t.backgroundColor=i["background-color"]),t.style=e.serializeStyle(i)}function h(e,t,i){var r=e.parseStyle(e.getAttrib(t,"style"));n(i,function(e){r[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(r))))}var p=this;p.tableProps=function(){p.table(!0)},p.table=function(r){function c(){function n(e,t,i){if("TD"===e.tagName||"TH"===e.tagName)C.setStyle(e,t,i);else if(e.children)for(var r=0;r<e.children.length;r++)n(e.children[r],t,i)}var r;d(C,this),x=e.extend(x,this.toJSON()),x["class"]===!1&&delete x["class"],i.undoManager.transact(function(){if(m||(m=i.plugins.table.insertTable(x.cols||1,x.rows||1)),i.dom.setAttribs(m,{style:x.style,"class":x["class"]}),i.settings.table_style_by_css){if(w=[],w.push({name:"border",value:x.border}),w.push({name:"border-spacing",value:s(x.cellspacing)}),h(C,m,w),C.setAttribs(m,{"data-mce-border-color":x.borderColor,"data-mce-cell-padding":x.cellpadding,"data-mce-border":x.border}),m.children)for(var e=0;e<m.children.length;e++)n(m.children[e],"border",x.border),n(m.children[e],"padding",s(x.cellpadding))}else i.dom.setAttribs(m,{border:x.border,cellpadding:x.cellpadding,cellspacing:x.cellspacing});C.getAttrib(m,"width")&&!i.settings.table_style_by_css?C.setAttrib(m,"width",a(x.width)):C.setStyle(m,"width",s(x.width)),C.setStyle(m,"height",s(x.height)),r=C.select("caption",m)[0],r&&!x.caption&&C.remove(r),!r&&x.caption&&(r=C.create("caption"),r.innerHTML=t.ie?"\xa0":'<br data-mce-bogus="1"/>',m.insertBefore(r,m.firstChild)),l(m),x.align&&i.formatter.apply("align"+x.align,{},m),i.focus(),i.addVisual()})}function p(e,t){function n(e,n){for(var i=0;i<n.length;i++){var r=C.getStyle(n[i],t);if("undefined"==typeof e&&(e=r),e!=r)return""}return e}var r,o=i.dom.select("td,th",e);return r=n(r,o)}var m,g,v,y,b,w,C=i.dom,x={};r===!0?(m=C.getParent(i.selection.getStart(),"table"),m&&(x={width:a(C.getStyle(m,"width")||C.getAttrib(m,"width")),height:a(C.getStyle(m,"height")||C.getAttrib(m,"height")),cellspacing:a(C.getStyle(m,"border-spacing")||C.getAttrib(m,"cellspacing")),cellpadding:C.getAttrib(m,"data-mce-cell-padding")||C.getAttrib(m,"cellpadding")||p(m,"padding"),border:C.getAttrib(m,"data-mce-border")||C.getAttrib(m,"border")||p(m,"border"),borderColor:C.getAttrib(m,"data-mce-border-color"),caption:!!C.select("caption",m)[0],"class":C.getAttrib(m,"class")},n("left center right".split(" "),function(e){i.formatter.matchNode(m,"align"+e)&&(x.align=e)}))):(g={label:"Cols",name:"cols"},v={label:"Rows",name:"rows"}),i.settings.table_class_list&&(x["class"]&&(x["class"]=x["class"].replace(/\s*mce\-item\-table\s*/g,"")),y={name:"class",type:"listbox",label:"Class",values:u(i.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return i.formatter.getCssText({block:"table",classes:[e.value]})})})}),b={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:i.settings.table_appearance_options!==!1?[g,v,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[g,v,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},y]},i.settings.table_advtab!==!1?(f(C,x,m),i.windowManager.open({title:"Table properties",data:x,bodyType:"tabpanel",body:[{title:"General",type:"form",items:b},o(C)],onsubmit:c})):i.windowManager.open({title:"Table properties",data:x,body:b,onsubmit:c})},p.merge=function(e,t){i.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();i.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},p.cell=function(){function t(e,t,n){(1===y.length||n)&&v.setAttrib(e,t,n)}function r(e,t,n){(1===y.length||n)&&v.setStyle(e,t,n)}function h(){d(v,this),m=e.extend(m,this.toJSON()),i.undoManager.transact(function(){n(y,function(e){t(e,"scope",m.scope),t(e,"style",m.style),t(e,"class",m["class"]),r(e,"width",s(m.width)),r(e,"height",s(m.height)),m.type&&e.nodeName.toLowerCase()!==m.type&&(e=v.rename(e,m.type)),1===y.length&&(l(e),c(e)),m.align&&i.formatter.apply("align"+m.align,{},e),m.valign&&i.formatter.apply("valign"+m.valign,{},e)}),i.focus()})}var p,m,g,v=i.dom,y=[];if(y=i.dom.select("td[data-mce-selected],th[data-mce-selected]"),p=i.dom.getParent(i.selection.getStart(),"td,th"),!y.length&&p&&y.push(p),p=p||y[0]){y.length>1?m={width:"",height:"",scope:"","class":"",align:"",style:"",type:p.nodeName.toLowerCase()}:(m={width:a(v.getStyle(p,"width")||v.getAttrib(p,"width")),height:a(v.getStyle(p,"height")||v.getAttrib(p,"height")),scope:v.getAttrib(p,"scope"),"class":v.getAttrib(p,"class")},m.type=p.nodeName.toLowerCase(),n("left center right".split(" "),function(e){i.formatter.matchNode(p,"align"+e)&&(m.align=e)}),n("top middle bottom".split(" "),function(e){i.formatter.matchNode(p,"valign"+e)&&(m.valign=e)}),f(v,m,p)),i.settings.table_cell_class_list&&(g={name:"class",type:"listbox",label:"Class",values:u(i.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return i.formatter.getCssText({block:"td",classes:[e.value]})})})});var b={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},g]};i.settings.table_cell_advtab!==!1?i.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:m,body:[{title:"General",type:"form",items:b},o(v)],onsubmit:h}):i.windowManager.open({title:"Cell properties",data:m,body:b,onsubmit:h})}},p.row=function(){function t(e,t,n){(1===w.length||n)&&b.setAttrib(e,t,n)}function r(e,t,n){(1===w.length||n)&&b.setStyle(e,t,n)}function c(){var o,a,c;d(b,this),v=e.extend(v,this.toJSON()),i.undoManager.transact(function(){var e=v.type;n(w,function(n){t(n,"scope",v.scope),t(n,"style",v.style),t(n,"class",v["class"]),r(n,"height",s(v.height)),e!==n.parentNode.nodeName.toLowerCase()&&(o=b.getParent(n,"table"),a=n.parentNode,c=b.select(e,o)[0],c||(c=b.create(e),o.firstChild?o.insertBefore(c,o.firstChild):o.appendChild(c)),c.appendChild(n),a.hasChildNodes()||b.remove(a)),1===w.length&&l(n),v.align&&i.formatter.apply("align"+v.align,{},n)}),i.focus()})}var h,p,m,g,v,y,b=i.dom,w=[];h=i.dom.getParent(i.selection.getStart(),"table"),p=i.dom.getParent(i.selection.getStart(),"td,th"),n(h.rows,function(e){n(e.cells,function(t){if(b.getAttrib(t,"data-mce-selected")||t==p)return w.push(e),!1})}),m=w[0],m&&(w.length>1?v={height:"",scope:"","class":"",align:"",type:m.parentNode.nodeName.toLowerCase()}:(v={height:a(b.getStyle(m,"height")||b.getAttrib(m,"height")),scope:b.getAttrib(m,"scope"),"class":b.getAttrib(m,"class")},v.type=m.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){i.formatter.matchNode(m,"align"+e)&&(v.align=e)}),f(b,v,m)),i.settings.table_row_class_list&&(g={name:"class",type:"listbox",label:"Class",values:u(i.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return i.formatter.getCssText({block:"tr",classes:[e.value]})})})}),y={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},g]},i.settings.table_row_advtab!==!1?i.windowManager.open({title:"Row properties",data:v,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},o(b)],onsubmit:c}):i.windowManager.open({title:"Row properties",data:v,body:y,onsubmit:c}))}}}),i("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(e,n){var i;return function(r){function o(e,t){return{index:e,y:r.dom.getPos(t).y}}function a(e,t){return{index:e,y:r.dom.getPos(t).y+t.offsetHeight}}function s(e,t){return{index:e,x:r.dom.getPos(t).x}}function l(e,t){return{index:e,x:r.dom.getPos(t).x+t.offsetWidth}}function c(){var e=r.getBody().dir;return"rtl"===e}function u(){return r.inline}function d(){return u?r.getBody().ownerDocument.body:r.getBody()}function f(e,t){return c()?l(e,t):s(e,t)}function h(e,t){return c()?s(e,t):l(e,t)}function p(e,t){return m(e,"width")/m(t,"width")*100}function m(e,t){var n=r.dom.getStyle(e,t,!0),i=parseInt(n,10);return i}function g(e){var t=m(e,"width"),n=m(e.parentElement,"width");return t/n*100}function v(e,t){var n=m(e,"width");return t/n*100}function y(e,t){var n=m(e.parentElement,"width");return t/n*100}function b(e,t,n){for(var i=[],r=1;r<n.length;r++){var o=n[r].element;i.push(e(r-1,o))}var a=n[n.length-1];return i.push(t(n.length-1,a.element)),i}function w(){var t=r.dom.select("."+fe,d());e.each(t,function(e){r.dom.remove(e)})}function C(e){w(),A(e)}function x(e,t,n,i,r,o,a,s){var l={"data-mce-bogus":"all","class":fe+" "+e,unselectable:"on","data-mce-resize":!1,style:"cursor: "+t+"; margin: 0; padding: 0; position: absolute; left: "+n+"px; top: "+i+"px; height: "+r+"px; width: "+o+"px; "};return l[a]=s,l}function _(t,n,i){e.each(t,function(e){var t=i.x,o=e.y-Ce/2,a=Ce,s=n;r.dom.add(d(),"div",x(he,pe,t,o,a,s,me,e.index))})}function S(t,n,i){e.each(t,function(e){var t=e.x-Ce/2,o=i.y,a=n,s=Ce;r.dom.add(d(),"div",x(ve,ye,t,o,a,s,be,e.index))})}function k(t){return e.map(t.rows,function(t){var n=e.map(t.cells,function(e){var t=e.hasAttribute("rowspan")?parseInt(e.getAttribute("rowspan"),10):1,n=e.hasAttribute("colspan")?parseInt(e.getAttribute("colspan"),10):1;return{element:e,rowspan:t,colspan:n}});return{element:t,cells:n}})}function E(n){function i(e,t){return e+","+t}function r(e,t){return s[i(e,t)]}function o(){var t=[];return e.each(l,function(e){t=t.concat(e.cells)}),t}function a(){return l}var s={},l=[],c=0,u=0;return e.each(n,function(n,r){var o=[];e.each(n.cells,function(e){for(var n=0;s[i(r,n)]!==t;)n++;for(var a={element:e.element,colspan:e.colspan,rowspan:e.rowspan,rowIndex:r,colIndex:n},l=0;l<e.colspan;l++)for(var d=0;d<e.rowspan;d++){var f=r+d,h=n+l;s[i(f,h)]=a,c=Math.max(c,f+1),u=Math.max(u,h+1)}o.push(a)}),l.push({element:n.element,cells:o})}),{grid:{maxRows:c,maxCols:u},getAt:r,getAllCells:o,getAllRows:a}}function T(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}function N(e,t,n){for(var i,r=e(),o=0;o<r.length;o++)t(r[o])&&(i=r[o]);return i?i:n()}function D(t){var n=T(0,t.grid.maxCols),i=T(0,t.grid.maxRows);return e.map(n,function(e){function n(){for(var n=[],r=0;r<i.length;r++){var o=t.getAt(r,e);o&&o.colIndex===e&&n.push(o)}return n}function r(e){return 1===e.colspan}function o(){for(var n,r=0;r<i.length;r++)if(n=t.getAt(r,e))return n;return null}return N(n,r,o)})}function R(t){var n=T(0,t.grid.maxCols),i=T(0,t.grid.maxRows);return e.map(i,function(e){function i(){for(var i=[],r=0;r<n.length;r++){var o=t.getAt(e,r);o&&o.rowIndex===e&&i.push(o)}return i}function r(e){return 1===e.rowspan}function o(){return t.getAt(e,0)}return N(i,r,o)})}function A(e){var t=k(e),n=E(t),i=R(n),s=D(n),l=r.dom.getPos(e),c=i.length>0?b(o,a,i):[],u=s.length>0?b(f,h,s):[];_(c,e.offsetWidth,l),S(u,e.offsetHeight,l)}function M(e,t,n,i){if(t<0||t>=e.length-1)return"";var r=e[t];if(r)r={value:r,delta:0};else for(var o=e.slice(0,t).reverse(),a=0;a<o.length;a++)o[a]&&(r={value:o[a],delta:a+1});var s=e[t+1];if(s)s={value:s,delta:1};else for(var l=e.slice(t+1),c=0;c<l.length;c++)l[c]&&(s={value:l[c],delta:c+1});var u=s.delta-r.delta,d=Math.abs(s.value-r.value)/u;return n?d/m(i,"width")*100:d}function B(e,t){var n=r.dom.getStyle(e,t);return n||(n=r.dom.getAttrib(e,t)),n||(n=r.dom.getStyle(e,t,!0)),n}function P(e,t,n){var i=B(e,"width"),r=parseInt(i,10),o=t?p(e,n):m(e,"width");return(t&&!j(i)||!t&&!$(i))&&(r=0),
!isNaN(r)&&r>0?r:o}function I(t,n,i){for(var r=D(t),o=e.map(r,function(e){return f(e.colIndex,e.element).x}),a=[],s=0;s<r.length;s++){var l=r[s].element.hasAttribute("colspan")?parseInt(r[s].element.getAttribute("colspan"),10):1,c=l>1?M(o,s):P(r[s].element,n,i);c=c?c:xe,a.push(c)}return a}function H(e){var t=B(e,"height"),n=parseInt(t,10);return j(t)&&(n=0),!isNaN(n)&&n>0?n:m(e,"height")}function L(t){for(var n=R(t),i=e.map(n,function(e){return o(e.rowIndex,e.element).y}),r=[],a=0;a<n.length;a++){var s=n[a].element.hasAttribute("rowspan")?parseInt(n[a].element.getAttribute("rowspan"),10):1,l=s>1?M(i,a):H(n[a].element);l=l?l:_e,r.push(l)}return r}function O(t,n,i,r,o){function a(t){return e.map(t,function(){return 0})}function s(){var e;if(o)e=[100-d[0]];else{var t=Math.max(r,d[0]+i);e=[t-d[0]]}return e}function l(e,t){var n,o=a(d.slice(0,e)),s=a(d.slice(t+1));if(i>=0){var l=Math.max(r,d[t]-i);n=o.concat([i,l-d[t]]).concat(s)}else{var c=Math.max(r,d[e]+i),u=d[e]-c;n=o.concat([c-d[e],u]).concat(s)}return n}function c(e,t){var n,o=a(d.slice(0,t));if(i>=0)n=o.concat([i]);else{var s=Math.max(r,d[t]+i);n=o.concat([s-d[t]])}return n}var u,d=t.slice(0);return u=0===t.length?[]:1===t.length?s():0===n?l(0,1):n>0&&n<t.length-1?l(n,n+1):n===t.length-1?c(n-1,n):[]}function F(e,t,n){for(var i=0,r=e;r<t;r++)i+=n[r];return i}function z(t,n){var i=t.getAllCells();return e.map(i,function(e){var t=F(e.colIndex,e.colIndex+e.colspan,n);return{element:e.element,width:t,colspan:e.colspan}})}function W(t,n){var i=t.getAllCells();return e.map(i,function(e){var t=F(e.rowIndex,e.rowIndex+e.rowspan,n);return{element:e.element,height:t,rowspan:e.rowspan}})}function U(t,n){var i=t.getAllRows();return e.map(i,function(e,t){return{element:e.element,height:n[t]}})}function j(e){return ke.test(e)}function $(e){return Ee.test(e)}function V(t,n,i){function o(t,n){e.each(t,function(e){r.dom.setStyle(e.element,"width",e.width+n),r.dom.setAttrib(e.element,"width",null)})}function a(){return i<u.grid.maxCols-1?g(t):g(t)+y(t,n)}function s(){return i<u.grid.maxCols-1?m(t,"width"):m(t,"width")+n}function l(e,n,o){i!=u.grid.maxCols-1&&o||(r.dom.setStyle(t,"width",e+n),r.dom.setAttrib(t,"width",null))}for(var c=k(t),u=E(c),d=j(t.width)||j(t.style.width),f=I(u,d,t),h=d?v(t,n):n,p=O(f,i,h,xe,d,t),b=[],w=0;w<p.length;w++)b.push(p[w]+f[w]);var C=z(u,b),x=d?"%":"px",_=d?a():s();r.undoManager.transact(function(){o(C,x),l(_,x,d)})}function q(t,n,i){for(var o=k(t),a=E(o),s=L(a),l=[],c=0,u=0;u<s.length;u++)l.push(u===i?n+s[u]:s[u]),c+=c[u];var d=W(a,l),f=U(a,l);r.undoManager.transact(function(){e.each(f,function(e){r.dom.setStyle(e.element,"height",e.height+"px"),r.dom.setAttrib(e.element,"height",null)}),e.each(d,function(e){r.dom.setStyle(e.element,"height",e.height+"px"),r.dom.setAttrib(e.element,"height",null)}),r.dom.setStyle(t,"height",c+"px"),r.dom.setAttrib(t,"height",null)})}function Y(){ae=setTimeout(function(){Q()},200)}function G(){clearTimeout(ae)}function K(){var e=document.createElement("div");return e.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),e.setAttribute("data-mce-bogus","all"),e}function X(e,t){r.dom.bind(e,"mouseup",function(){Q()}),r.dom.bind(e,"mousemove",function(e){G(),se&&t(e)}),r.dom.bind(e,"mouseout",function(){Y()})}function Q(){if(r.dom.remove(le),se){r.dom.removeClass(ce,Se),se=!1;var e,t;if(Z(ce)){var n=parseInt(r.dom.getAttrib(ce,we),10),o=r.dom.getPos(ce).x;e=parseInt(r.dom.getAttrib(ce,be),10),t=c()?n-o:o-n,Math.abs(t)>=1&&V(i,t,e)}else if(ee(ce)){var a=parseInt(r.dom.getAttrib(ce,ge),10),s=r.dom.getPos(ce).y;e=parseInt(r.dom.getAttrib(ce,me),10),t=s-a,Math.abs(t)>=1&&q(i,t,e)}C(i),r.nodeChanged()}}function J(e,t){le=le?le:K(),se=!0,r.dom.addClass(e,Se),ce=e,X(le,t),r.dom.add(d(),le)}function Z(e){return r.dom.hasClass(e,ve)}function ee(e){return r.dom.hasClass(e,he)}function te(e){ue=ue!==t?ue:e.clientX;var n=e.clientX-ue;ue=e.clientX;var i=r.dom.getPos(ce).x;r.dom.setStyle(ce,"left",i+n+"px")}function ne(e){de=de!==t?de:e.clientY;var n=e.clientY-de;de=e.clientY;var i=r.dom.getPos(ce).y;r.dom.setStyle(ce,"top",i+n+"px")}function ie(e){ue=t,J(e,te)}function re(e){de=t,J(e,ne)}function oe(e){var t=e.target,n=r.getBody();if(r.$.contains(n,i)||i===n)if(Z(t)){e.preventDefault();var o=r.dom.getPos(t).x;r.dom.setAttrib(t,we,o),ie(t)}else if(ee(t)){e.preventDefault();var a=r.dom.getPos(t).y;r.dom.setAttrib(t,ge,a),re(t)}else w()}var ae,se,le,ce,ue,de,fe="mce-resize-bar",he="mce-resize-bar-row",pe="row-resize",me="data-row",ge="data-initial-top",ve="mce-resize-bar-col",ye="col-resize",be="data-col",we="data-initial-left",Ce=4,xe=10,_e=10,Se="mce-resize-bar-dragging",ke=new RegExp(/(\d+(\.\d+)?%)/),Ee=new RegExp(/px|em/);return r.on("init",function(){r.dom.bind(d(),"mousedown",oe)}),r.on("ObjectResized",function(t){var n=t.target;if("TABLE"===n.nodeName){var i=[];e.each(n.rows,function(t){e.each(t.cells,function(e){var t=r.dom.getStyle(e,"width",!0);i.push({cell:e,width:t})})}),e.each(i,function(e){r.dom.setStyle(e.cell,"width",e.width),r.dom.setAttrib(e.cell,"width",null)})}}),r.on("mouseover",function(e){if(!se){var t=r.dom.getParent(e.target,"table");("TABLE"===e.target.nodeName||t)&&(i=t,C(t))}}),r.on("keydown",function(e){switch(e.keyCode){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:w()}}),r.on("remove",function(){w(),r.dom.unbind(d(),"mousedown",oe)}),{adjustWidth:V,adjustHeight:q,clearBars:w,drawBars:A,determineDeltas:O,getTableGrid:E,getTableDetails:k,getWidths:I,getPixelHeights:L,isPercentageBasedSize:j,isPixelBasedSize:$,recalculateWidths:z,recalculateCellHeights:W,recalculateRowHeights:U}}}),i("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(e,t,n,i,r,o,a,s,l){function c(o){function a(e){return function(){o.execCommand(e)}}function l(e,t){var n,i,r,a;for(r='<table id="__mce"><tbody>',n=0;n<t;n++){for(r+="<tr>",i=0;i<e;i++)r+="<td>"+(s.ie&&s.ie<10?"&nbsp;":"<br>")+"</td>";r+="</tr>"}return r+="</tbody></table>",o.undoManager.transact(function(){o.insertContent(r),a=o.dom.get("__mce"),o.dom.setAttrib(a,"id",null),o.$("tr",a).each(function(e,t){o.fire("newrow",{node:t}),o.$("th,td",t).each(function(e,t){o.fire("newcell",{node:t})})}),o.dom.setAttribs(a,o.settings.table_default_attributes||{}),o.dom.setStyles(a,o.settings.table_default_styles||{})}),a}function c(e,t,n){function i(){var i,r,a,s={},l=0;r=o.dom.select("td[data-mce-selected],th[data-mce-selected]"),i=r[0],i||(i=o.selection.getStart()),n&&r.length>0?(u(r,function(e){return s[e.parentNode.parentNode.nodeName]=1}),u(s,function(e){l+=e}),a=1!==l):a=!o.dom.getParent(i,t),e.disabled(a),o.selection.selectorChanged(t,function(t){e.disabled(!t)})}o.initialized?i():o.on("init",i)}function d(){c(this,"table")}function f(){c(this,"td,th")}function h(){c(this,"td,th",!0)}function p(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function m(e,t,n){var i,r,a,s,l,c=n.getEl().getElementsByTagName("table")[0],u=n.isRtl()||"tl-tr"==n.parent().rel;for(c.nextSibling.innerHTML=e+1+" x "+(t+1),u&&(e=9-e),r=0;r<10;r++)for(i=0;i<10;i++)s=c.rows[r].childNodes[i].firstChild,l=(u?i>=e:i<=e)&&r<=t,o.dom.toggleClass(s,"mce-active",l),l&&(a=s);return a.parentNode}function g(){o.addButton("tableprops",{title:"Table properties",onclick:S.tableProps,icon:"table"}),o.addButton("tabledelete",{title:"Delete table",onclick:a("mceTableDelete")}),o.addButton("tablecellprops",{title:"Cell properties",onclick:a("mceTableCellProps")}),o.addButton("tablemergecells",{title:"Merge cells",onclick:a("mceTableMergeCells")}),o.addButton("tablesplitcells",{title:"Split cell",onclick:a("mceTableSplitCells")}),o.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:a("mceTableInsertRowBefore")}),o.addButton("tableinsertrowafter",{title:"Insert row after",onclick:a("mceTableInsertRowAfter")}),o.addButton("tabledeleterow",{title:"Delete row",onclick:a("mceTableDeleteRow")}),o.addButton("tablerowprops",{title:"Row properties",onclick:a("mceTableRowProps")}),o.addButton("tablecutrow",{title:"Cut row",onclick:a("mceTableCutRow")}),o.addButton("tablecopyrow",{title:"Copy row",onclick:a("mceTableCopyRow")}),o.addButton("tablepasterowbefore",{title:"Paste row before",onclick:a("mceTablePasteRowBefore")}),o.addButton("tablepasterowafter",{title:"Paste row after",onclick:a("mceTablePasteRowAfter")}),o.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:a("mceTableInsertColBefore")}),o.addButton("tableinsertcolafter",{title:"Insert column after",onclick:a("mceTableInsertColAfter")}),o.addButton("tabledeletecol",{title:"Delete column",onclick:a("mceTableDeleteCol")})}function v(e){var t=o.dom.is(e,"table")&&o.getBody().contains(e);return t}function y(){var e=o.settings.table_toolbar;""!==e&&e!==!1&&(e||(e="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),o.addContextToolbar(v,e))}function b(){return C}function w(e){C=e}var C,x,_=this,S=new i(o);!o.settings.object_resizing||o.settings.table_resize_bars===!1||o.settings.object_resizing!==!0&&"table"!==o.settings.object_resizing||(x=r(o)),o.settings.table_grid===!1?o.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:S.table}):o.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),S.table())},onshow:function(){m(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");o.dom.removeClass(e,"mce-active"),o.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:p(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,i=e.target;"A"==i.tagName.toUpperCase()&&(t=parseInt(i.getAttribute("data-mce-x"),10),n=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(m(t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),o.undoManager.transact(function(){l(t.lastX+1,t.lastY+1)}),o.addVisual())}}]}),o.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:d,onclick:S.tableProps}),o.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:d,cmd:"mceTableDelete"}),o.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:a("mceTableCellProps"),onPostRender:f},{text:"Merge cells",onclick:a("mceTableMergeCells"),onPostRender:h},{text:"Split cell",onclick:a("mceTableSplitCells"),onPostRender:f}]}),o.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:a("mceTableInsertRowBefore"),onPostRender:f},{text:"Insert row after",onclick:a("mceTableInsertRowAfter"),onPostRender:f},{text:"Delete row",onclick:a("mceTableDeleteRow"),onPostRender:f},{text:"Row properties",onclick:a("mceTableRowProps"),onPostRender:f},{text:"-"},{text:"Cut row",onclick:a("mceTableCutRow"),onPostRender:f},{text:"Copy row",onclick:a("mceTableCopyRow"),onPostRender:f},{text:"Paste row before",onclick:a("mceTablePasteRowBefore"),onPostRender:f},{text:"Paste row after",onclick:a("mceTablePasteRowAfter"),onPostRender:f}]}),o.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:a("mceTableInsertColBefore"),onPostRender:f},{text:"Insert column after",onclick:a("mceTableInsertColAfter"),onPostRender:f},{text:"Delete column",onclick:a("mceTableDeleteCol"),onPostRender:f}]});var k=[];u("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"==e?k.push({text:"-"}):k.push(o.menuItems[e])}),o.addButton("table",{type:"menubutton",title:"Table",menu:k}),s.isIE||o.on("click",function(e){e=e.target,"TABLE"===e.nodeName&&(o.selection.select(e),o.nodeChanged())}),_.quirks=new t(o),o.on("Init",function(){_.cellSelection=new n(o,function(e){e&&x&&x.clearBars()}),_.resizeBars=x}),o.on("PreInit",function(){o.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}),u({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t;t=o.dom.getParent(o.selection.getStart(),"th,td"),o.dom.select("td[data-mce-selected],th[data-mce-selected]").length?e.merge():S.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRows(!0)},mceTableInsertRowAfter:function(e){e.insertRows()},mceTableInsertColBefore:function(e){e.insertCols(!0)},mceTableInsertColAfter:function(e){e.insertCols()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){C=e.cutRows()},mceTableCopyRow:function(e){C=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(C,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(C)},mceSplitColsBefore:function(e){e.splitCols(!0)},mceSplitColsAfter:function(e){e.splitCols(!1)},mceTableDelete:function(e){x&&x.clearBars(),e.deleteTable()}},function(t,n){o.addCommand(n,function(){var n=new e(o);n&&(t(n),o.execCommand("mceRepaint"),_.cellSelection.clear())})}),u({mceInsertTable:S.table,mceTableProps:function(){S.table(!0)},mceTableRowProps:S.row,mceTableCellProps:S.cell},function(e,t){o.addCommand(t,function(t,n){e(n)})}),g(),y(),o.settings.table_tab_navigation!==!1&&o.on("keydown",function(t){var n,i,r;9==t.keyCode&&(n=o.dom.getParent(o.selection.getStart(),"th,td"),n&&(t.preventDefault(),i=new e(o),r=t.shiftKey?-1:1,o.undoManager.transact(function(){!i.moveRelIdx(n,r)&&r>0&&(i.insertRow(),i.refresh(),i.moveRelIdx(n,r))})))}),_.insertTable=l,_.setClipboardRows=w,_.getClipboardRows=b}var u=o.each;l.add("table",c)})}(window);