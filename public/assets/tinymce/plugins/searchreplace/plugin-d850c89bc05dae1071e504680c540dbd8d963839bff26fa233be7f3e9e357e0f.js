!function(){function e(e){return e&&1==e.nodeType&&"false"===e.contentEditable}function t(t,n,i,r,o){function a(e,t){if(t=t||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(t>0){var i=e[t];if(!i)throw"Invalid capture group";n+=e[0].indexOf(i),e[0]=i}return[n,n+e[0].length,[e[0]]]}function s(t){var n;if(3===t.nodeType)return t.data;if(p[t.nodeName]&&!h[t.nodeName])return"";if(n="",e(t))return"\n";if((h[t.nodeName]||m[t.nodeName])&&(n+="\n"),t=t.firstChild)do n+=s(t);while(t=t.nextSibling);return n}function l(t,n,i){var r,o,a,s,l=[],c=0,u=t,d=n.shift(),f=0;e:for(;;){if((h[u.nodeName]||m[u.nodeName]||e(u))&&c++,3===u.nodeType&&(!o&&u.length+c>=d[1]?(o=u,s=d[1]-c):r&&l.push(u),!r&&u.length+c>d[0]&&(r=u,a=d[0]-c),c+=u.length),r&&o){if(u=i({startNode:r,startNodeIndex:a,endNode:o,endNodeIndex:s,innerNodes:l,match:d[2],matchIndex:f}),c-=o.length-s,r=null,o=null,l=[],d=n.shift(),f++,!d)break}else if(p[u.nodeName]&&!h[u.nodeName]||!u.firstChild){if(u.nextSibling){u=u.nextSibling;continue}}else if(!e(u)){u=u.firstChild;continue}for(;;){if(u.nextSibling){u=u.nextSibling;break}if(u.parentNode===t)break e;u=u.parentNode}}}function c(e){var t;if("function"!=typeof e){var n=e.nodeType?e:f.createElement(e);t=function(e,t){var i=n.cloneNode(!1);return i.setAttribute("data-mce-index",t),e&&i.appendChild(f.createTextNode(e)),i}}else t=e;return function(e){var n,i,r,o=e.startNode,a=e.endNode,s=e.matchIndex;if(o===a){var l=o;r=l.parentNode,e.startNodeIndex>0&&(n=f.createTextNode(l.data.substring(0,e.startNodeIndex)),r.insertBefore(n,l));var c=t(e.match[0],s);return r.insertBefore(c,l),e.endNodeIndex<l.length&&(i=f.createTextNode(l.data.substring(e.endNodeIndex)),r.insertBefore(i,l)),l.parentNode.removeChild(l),c}n=f.createTextNode(o.data.substring(0,e.startNodeIndex)),i=f.createTextNode(a.data.substring(e.endNodeIndex));for(var u=t(o.data.substring(e.startNodeIndex),s),d=[],h=0,p=e.innerNodes.length;h<p;++h){var m=e.innerNodes[h],g=t(m.data,s);m.parentNode.replaceChild(g,m),d.push(g)}var v=t(a.data.substring(0,e.endNodeIndex),s);return r=o.parentNode,r.insertBefore(n,o),r.insertBefore(u,o),r.removeChild(o),r=a.parentNode,r.insertBefore(v,a),r.insertBefore(i,a),r.removeChild(a),v}}var u,d,f,h,p,m,g=[],v=0;if(f=n.ownerDocument,h=o.getBlockElements(),p=o.getWhiteSpaceElements(),m=o.getShortEndedElements(),d=s(n)){if(t.global)for(;u=t.exec(d);)g.push(a(u,r));else u=d.match(t),g.push(a(u,r));return g.length&&(v=g.length,l(n,g,c(i))),v}}function n(e){function n(){function t(){o.statusbar.find("#next").disabled(!a(d+1).length),o.statusbar.find("#prev").disabled(!a(d-1).length)}function n(){e.windowManager.alert("Could not find the specified string.",function(){o.find("#find")[0].focus()})}var i,r={};i=tinymce.trim(e.selection.getContent({format:"text"}));var o=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),u.done()},onSubmit:function(e){var i,s,l,c;return e.preventDefault(),s=o.find("#case").checked(),c=o.find("#words").checked(),l=o.find("#find").value(),l.length?r.text==l&&r.caseState==s&&r.wholeWord==c?0===a(d+1).length?void n():(u.next(),void t()):(i=u.find(l,s,c),i||n(),o.statusbar.items().slice(1).disabled(0===i),t(),void(r={text:l,caseState:s,wholeWord:c})):(u.done(!1),void o.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){o.submit()}},{text:"Replace",disabled:!0,onclick:function(){u.replace(o.find("#replace").value())||(o.statusbar.items().slice(1).disabled(!0),d=-1,r={})}},{text:"Replace all",disabled:!0,onclick:function(){u.replace(o.find("#replace").value(),!0,!0),o.statusbar.items().slice(1).disabled(!0),r={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){u.prev(),t()}},{text:"Next",name:"next",disabled:!0,onclick:function(){u.next(),t()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:i},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}function i(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function r(n){var i,r;return r=e.dom.create("span",{"data-mce-bogus":1}),r.className="mce-match-marker",i=e.getBody(),u.done(!1),t(n,i,r,!1,e.schema)}function o(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function a(t){var n,r=[];if(n=tinymce.toArray(e.getBody().getElementsByTagName("span")),n.length)for(var o=0;o<n.length;o++){var a=i(n[o]);null!==a&&a.length&&a===t.toString()&&r.push(n[o])}return r}function s(t){var n=d,i=e.dom;t=t!==!1,t?n++:n--,i.removeClass(a(d),"mce-match-marker-selected");var r=a(n);return r.length?(i.addClass(a(n),"mce-match-marker-selected"),e.selection.scrollIntoView(r[0]),n):-1}function l(t){var n=e.dom,i=t.parentNode;n.remove(t),n.isEmpty(i)&&n.remove(i)}function c(e){var t=i(e);return null!==t&&t.length>0}var u=this,d=-1;u.init=function(e){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:n,separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Meta+F",onclick:n}),e.addCommand("SearchReplace",n),e.shortcuts.add("Meta+F","",n)},u.find=function(e,t,n){e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e=n?"\\b"+e+"\\b":e;var i=r(new RegExp(e,t?"g":"gi"));return i&&(d=-1,d=s(!0)),i},u.next=function(){var e=s(!0);e!==-1&&(d=e)},u.prev=function(){var e=s(!1);e!==-1&&(d=e)},u.replace=function(t,n,r){var s,f,h,p,m,g,v=d;for(n=n!==!1,h=e.getBody(),f=tinymce.grep(tinymce.toArray(h.getElementsByTagName("span")),c),s=0;s<f.length;s++){var y=i(f[s]);if(p=m=parseInt(y,10),r||p===d){for(t.length?(f[s].firstChild.nodeValue=t,o(f[s])):l(f[s]);f[++s];){if(p=parseInt(i(f[s]),10),p!==m){s--;break}l(f[s])}n&&v--}else m>d&&f[s].setAttribute("data-mce-index",m-1)}return e.undoManager.add(),d=v,n?(g=a(v+1).length>0,u.next()):(g=a(v-1).length>0,u.prev()),!r&&g},u.done=function(t){var n,r,a,s;for(r=tinymce.toArray(e.getBody().getElementsByTagName("span")),n=0;n<r.length;n++){var l=i(r[n]);null!==l&&l.length&&(l===d.toString()&&(a||(a=r[n].firstChild),s=r[n].firstChild),o(r[n]))}if(a&&s){var c=e.dom.createRng();return c.setStart(a,0),c.setEnd(s,s.data.length),t!==!1&&e.selection.setRng(c),c}}}tinymce.PluginManager.add("searchreplace",n)}();