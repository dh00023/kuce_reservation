!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,o=n.defn,a=r.length,s=new Array(a),l=0;l<a;++l)s[l]=i(r[l]);var c=o.apply(null,s);if(void 0===c)throw"module ["+t+"] returned undefined";n.instance=c},n=function(t,n,i){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===i)throw"no definition function for "+t;e[t]={deps:n,defn:i,instance:void 0}},i=function(n){var i=e[n];if(void 0===i)throw"module ["+n+"] was undefined";return void 0===i.instance&&t(n),i.instance},r=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;++o)r.push(i(e[o]));t.apply(null,t)},o={};o.bolt={module:{api:{define:n,require:r,demand:i}}};var a=n,s=function(e,t){a(e,[],function(){return t})};s("1",tinymce.PluginManager),s("2",tinymce.util.Tools),s("3",tinymce.util.VK),a("4",[],function(){var e=function(e){return e&&3===e.nodeType},t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},i=function(e){return e&&"BR"===e.nodeName},r=function(e){return e.parentNode.firstChild===e},o=function(e){return e.parentNode.lastChild===e},a=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},s=function(e,t){return!!i(t)&&!(!e.isBlock(t.nextSibling)||i(t.previousSibling))},l=function(e,t,n){var i=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&i},c=function(e,t){return e.isChildOf(t,e.getRoot())};return{isTextNode:e,isListNode:t,isListItemNode:n,isBr:i,isFirstChild:r,isLastChild:o,isTextBlock:a,isBogusBr:s,isEmpty:l,isChildOfBody:c}}),s("9",tinymce.dom.TreeWalker),s("a",tinymce.dom.RangeUtils),a("b",["2","4"],function(e,t){var n=function(n){return e.grep(n.selection.getSelectedBlocks(),function(e){return t.isListItemNode(e)})};return{getSelectedListItems:n}}),s("h",tinymce.dom.DOMUtils.DOM),a("d",["a","4"],function(e,t){var n=function(n,i){var r=e.getNode(n,i);if(t.isListItemNode(n)&&t.isTextNode(r)){var o=i>=n.childNodes.length?r.data.length:0;return{container:r,offset:o}}return{container:n,offset:i}},i=function(e){var t=e.cloneRange(),i=n(e.startContainer,e.startOffset);t.setStart(i.container,i.offset);var r=n(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t};return{getNormalizedEndPoint:n,normalizeRange:i}}),a("c",["h","4","d"],function(e,t,n){var i=function(t){var n={},i=function(i){var r,o,a;o=t[i?"startContainer":"endContainer"],a=t[i?"startOffset":"endOffset"],1===o.nodeType&&(r=e.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(a=Math.min(a,o.childNodes.length-1),i?o.insertBefore(r,o.childNodes[a]):e.insertAfter(r,o.childNodes[a])):o.appendChild(r),o=r,a=0),n[i?"startContainer":"endContainer"]=o,n[i?"startOffset":"endOffset"]=a};return i(!0),t.collapsed||i(),n},r=function(t){function i(n){var i,r,o,a=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1};i=o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],i&&(1===i.nodeType&&(r=a(i),i=i.parentNode,e.remove(o)),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=r)}i(!0),i();var r=e.createRng();return r.setStart(t.startContainer,t.startOffset),t.endContainer&&r.setEnd(t.endContainer,t.endOffset),n.normalizeRange(r)};return{createBookmark:i,resolveBookmark:r}}),a("e",["h","2","4"],function(e,t,n){var i=function(t,i){var r,o=i.parentNode;"LI"===o.nodeName&&o.firstChild===i&&(r=o.previousSibling,r&&"LI"===r.nodeName?(r.appendChild(i),n.isEmpty(t,o)&&e.remove(o)):e.setStyle(o,"listStyleType","none")),n.isListNode(o)&&(r=o.previousSibling,r&&"LI"===r.nodeName&&r.appendChild(i))},r=function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){i(e,t)})};return{normalizeList:i,normalizeLists:r}}),s("f",tinymce.dom.BookmarkManager),s("j",tinymce.Env),a("i",["h","j"],function(e,t){var n=function(n,i,r){var o,a,s,l=e.createFragment(),c=n.schema.getBlockElements();if(n.settings.forced_root_block&&(r=r||n.settings.forced_root_block),r&&(a=e.create(r),a.tagName===n.settings.forced_root_block&&e.setAttribs(a,n.settings.forced_root_block_attrs),l.appendChild(a)),i)for(;o=i.firstChild;){var u=o.nodeName;s||"SPAN"===u&&"bookmark"===o.getAttribute("data-mce-type")||(s=!0),c[u]?(l.appendChild(o),a=null):r?(a||(a=e.create(r),l.appendChild(a)),a.appendChild(o)):l.appendChild(o)}return n.settings.forced_root_block?s||t.ie&&!(t.ie>10)||a.appendChild(e.create("br",{"data-mce-bogus":"1"})):l.appendChild(e.create("br")),l};return{createNewTextBlock:n}}),a("g",["h","2","i","4"],function(e,t,n,i){var r=function(r,o,a,s){var l,c,u,d,f=function(n){t.each(u,function(e){n.parentNode.insertBefore(e,a.parentNode)}),e.remove(n)};for(u=e.select('span[data-mce-type="bookmark"]',o),s=s||n.createNewTextBlock(r,a),l=e.createRng(),l.setStartAfter(a),l.setEndAfter(o),c=l.extractContents(),d=c.firstChild;d;d=d.firstChild)if("LI"===d.nodeName&&r.dom.isEmpty(d)){e.remove(d);break}r.dom.isEmpty(c)||e.insertAfter(c,o),e.insertAfter(s,o),i.isEmpty(r.dom,a.parentNode)&&f(a.parentNode),e.remove(a),i.isEmpty(r.dom,o)&&e.remove(o)};return{splitList:r}}),a("7",["h","4","c","b","g","e","i"],function(e,t,n,i,r,o,a){var s=function(n,i){t.isEmpty(n,i)&&e.remove(i)},l=function(n,i){var l,c=i.parentNode,u=c.parentNode;return!(c!==n.getBody()&&("DD"===i.nodeName?(e.rename(i,"DT"),0):t.isFirstChild(i)&&t.isLastChild(i)?("LI"===u.nodeName?(e.insertAfter(i,u),s(n.dom,u),e.remove(c)):t.isListNode(u)?e.remove(c,!0):(u.insertBefore(a.createNewTextBlock(n,i),c),e.remove(c)),0):t.isFirstChild(i)?("LI"===u.nodeName?(e.insertAfter(i,u),i.appendChild(c),s(n.dom,u)):t.isListNode(u)?u.insertBefore(i,c):(u.insertBefore(a.createNewTextBlock(n,i),c),e.remove(i)),0):t.isLastChild(i)?("LI"===u.nodeName?e.insertAfter(i,u):t.isListNode(u)?e.insertAfter(i,c):(e.insertAfter(a.createNewTextBlock(n,i),c),e.remove(i)),0):("LI"===u.nodeName?(c=u,l=a.createNewTextBlock(n,i,"LI")):l=t.isListNode(u)?a.createNewTextBlock(n,i,"LI"):a.createNewTextBlock(n,i),r.splitList(n,c,i,l),o.normalizeLists(n.dom,c.parentNode),0)))},c=function(e){var t=i.getSelectedListItems(e);if(t.length){var r,o,a=n.createBookmark(e.selection.getRng(!0)),s=e.getBody();for(r=t.length;r--;)for(var c=t[r].parentNode;c&&c!==s;){for(o=t.length;o--;)if(t[o]===c){t.splice(r,1);break}c=c.parentNode}for(r=0;r<t.length&&(l(e,t[r])||0!==r);r++);return e.selection.setRng(n.resolveBookmark(a)),e.nodeChanged(),!0}};return{outdent:l,outdentSelection:c}}),a("8",["2","f","b","4","c","g","e","7"],function(e,t,n,i,r,o,a,s){var l=function(e,t,n){var i=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",i)},c=function(t,n){e.each(n,function(e,n){t.setAttribute(n,e)})},u=function(t,n,i){c(n,i["list-attributes"]),e.each(t.select("li",n),function(e){c(e,i["list-item-attributes"])})},d=function(e,t,n){l(e,t,n),u(e,t,n)},f=function(e,t,n){var r,o,a=e.getBody();for(r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===r.nodeType&&(r=r.childNodes[Math.min(o,r.childNodes.length-1)]||r);r.parentNode!==a;){if(i.isTextBlock(e,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},h=function(n,r){for(var o,a=[],s=n.getBody(),l=n.dom,c=f(n,r,!0),u=f(n,r,!1),d=[],h=c;h&&(d.push(h),h!==u);h=h.nextSibling);return e.each(d,function(e){if(i.isTextBlock(n,e))return a.push(e),void(o=null);if(l.isBlock(e)||i.isBr(e))return i.isBr(e)&&l.remove(e),void(o=null);var r=e.nextSibling;return t.isBookmarkNode(e)&&(i.isTextBlock(n,r)||!r&&e.parentNode===s)?void(o=null):(o||(o=l.create("p"),e.parentNode.insertBefore(o,e),a.push(o)),void o.appendChild(e))}),a},p=function(t,n,o){var a,s=t.selection.getRng(!0),l="LI",c=t.dom;o=o?o:{},"false"!==c.getContentEditable(t.selection.getNode())&&(n=n.toUpperCase(),"DL"===n&&(l="DT"),a=r.createBookmark(s),e.each(h(t,s),function(e){var r,a,s=function(e){var t=c.getStyle(e,"list-style-type"),n=o?o["list-style-type"]:"";return n=null===n?"":n,t===n};a=e.previousSibling,a&&i.isListNode(a)&&a.nodeName===n&&s(a)?(r=a,e=c.rename(e,l),a.appendChild(e)):(r=c.create(n),e.parentNode.insertBefore(r,e),r.appendChild(e),e=c.rename(e,l)),d(c,r,o),C(t.dom,r)}),t.selection.setRng(r.resolveBookmark(a)))},m=function(t){var l=r.createBookmark(t.selection.getRng(!0)),c=t.getBody(),u=n.getSelectedListItems(t),d=e.grep(u,function(e){return t.dom.isEmpty(e)});u=e.grep(u,function(e){return!t.dom.isEmpty(e)}),e.each(d,function(e){if(i.isEmpty(t.dom,e))return void s.outdent(t,e)}),e.each(u,function(e){var n,r;if(e.parentNode!==t.getBody()){for(n=e;n&&n!==c;n=n.parentNode)i.isListNode(n)&&(r=n);o.splitList(t,r,e),a.normalizeLists(t.dom,r.parentNode)}}),t.selection.setRng(r.resolveBookmark(l))},g=function(e,t){return e&&t&&i.isListNode(e)&&e.nodeName===t.nodeName},v=function(e,t,n){var i=e.getStyle(t,"list-style-type",!0),r=e.getStyle(n,"list-style-type",!0);return i===r},y=function(e,t){return e.className===t.className},b=function(e,t,n){return g(t,n)&&v(e,t,n)&&y(t,n)},C=function(e,t){var n,i;if(n=t.nextSibling,b(e,t,n)){for(;i=n.firstChild;)t.appendChild(i);e.remove(n)}if(n=t.previousSibling,b(e,t,n)){for(;i=n.lastChild;)t.insertBefore(i,t.firstChild);e.remove(n)}},w=function(e,t,n){var i=e.dom.getParent(e.selection.getStart(),"OL,UL,DL");if(n=n?n:{},i!==e.getBody())if(i)if(i.nodeName===t)m(e,t);else{var o=r.createBookmark(e.selection.getRng(!0));d(e.dom,i,n),C(e.dom,e.dom.rename(i,t)),e.selection.setRng(r.resolveBookmark(o))}else p(e,t,n)};return{toggleList:w,removeList:m,mergeWithAdjacentLists:C}}),a("5",["9","a","3","b","4","c","d","e","8"],function(e,t,n,i,r,o,a,s,l){var c=function(n,i,o){var a,s,l=i.startContainer,c=i.startOffset;if(3===l.nodeType&&(o?c<l.data.length:c>0))return l;for(a=n.schema.getNonEmptyElements(),1===l.nodeType&&(l=t.getNode(l,c)),s=new e(l,n.getBody()),o&&r.isBogusBr(n.dom,l)&&s.next();l=s[o?"next":"prev2"]();){if("LI"===l.nodeName&&!l.hasChildNodes())return l;if(a[l.nodeName])return l;if(3===l.nodeType&&l.data.length>0)return l}},u=function(e,t,n){var i,o,a=t.parentNode;if(r.isChildOfBody(e,t)&&r.isChildOfBody(e,n)){if(r.isListNode(n.lastChild)&&(o=n.lastChild),a===n.lastChild&&r.isBr(a.previousSibling)&&e.remove(a.previousSibling),i=n.lastChild,i&&r.isBr(i)&&t.hasChildNodes()&&e.remove(i),r.isEmpty(e,n,!0)&&e.$(n).empty(),!r.isEmpty(e,t,!0))for(;i=t.firstChild;)n.appendChild(i);o&&n.appendChild(o),e.remove(t),r.isEmpty(e,a)&&a!==e.getRoot()&&e.remove(a)}},d=function(e,t){var n,i,s,d=e.dom,f=e.selection,h=d.getParent(f.getStart(),"LI");if(h){if(n=h.parentNode,n===e.getBody()&&r.isEmpty(d,n))return!0;if(i=a.normalizeRange(f.getRng(!0)),s=d.getParent(c(e,i,t),"LI"),s&&s!==h){var p=o.createBookmark(i);return t?u(d,s,h):u(d,h,s),e.selection.setRng(o.resolveBookmark(p)),!0}if(!s&&!t&&l.removeList(e,n.nodeName))return!0}return!1},f=function(e,t){var n=e.dom,i=n.getParent(e.selection.getStart(),n.isBlock);if(i&&n.isEmpty(i)){var r=a.normalizeRange(e.selection.getRng(!0)),o=n.getParent(c(e,r,t),"LI");if(o)return e.undoManager.transact(function(){n.remove(i),l.mergeWithAdjacentLists(n,o.parentNode),e.selection.select(o,!0),e.selection.collapse(t)}),!0}return!1},h=function(e,t){return d(e,t)||f(e,t)},p=function(e){var t=e.dom.getParent(e.selection.getStart(),"LI,DT,DD");return!!(t||i.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),s.normalizeLists(e.dom,e.getBody())}),!0)},m=function(e,t){return e.selection.isCollapsed()?h(e,t):p(e)},g=function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?m(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&m(e,!0)&&t.preventDefault()})};return{setup:g,backspaceDelete:m}}),a("6",["h","4","c","b"],function(e,t,n,i){var r=function(n,i){var r;if(t.isListNode(n)){for(;r=n.firstChild;)i.appendChild(r);e.remove(n)}},o=function(n){var i,o,a;return"DT"===n.nodeName?(e.rename(n,"DD"),!0):(i=n.previousSibling,i&&t.isListNode(i)?(i.appendChild(n),!0):i&&"LI"===i.nodeName&&t.isListNode(i.lastChild)?(i.lastChild.appendChild(n),r(n.lastChild,i.lastChild),!0):(i=n.nextSibling,i&&t.isListNode(i)?(i.insertBefore(n,i.firstChild),!0):(i=n.previousSibling,!(!i||"LI"!==i.nodeName||(o=e.create(n.parentNode.nodeName),a=e.getStyle(n.parentNode,"listStyleType"),a&&e.setStyle(o,"listStyleType",a),i.appendChild(o),o.appendChild(n),r(n.lastChild,o),0)))))},a=function(e){var t=i.getSelectedListItems(e);if(t.length){for(var r=n.createBookmark(e.selection.getRng(!0)),a=0;a<t.length&&(o(t[a])||0!==a);a++);return e.selection.setRng(n.resolveBookmark(r)),e.nodeChanged(),!0}};return{indentSelection:a}}),a("0",["1","2","3","4","5","6","7","8"],function(e,t,n,i,r,o,a,s){var l=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},c=function(e){e.on("BeforeExecCommand",function(t){var n,i=t.command.toLowerCase();if("indent"===i?o.indentSelection(e)&&(n=!0):"outdent"===i&&a.outdentSelection(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){s.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){s.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){s.toggleList(e,"DL",n)})},u=function(e){e.addQueryStateHandler("InsertUnorderedList",l(e,"UL")),e.addQueryStateHandler("InsertOrderedList",l(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",l(e,"DL"))},d=function(e){e.on("keydown",function(t){9!==t.keyCode||n.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?a.outdentSelection(e):o.indentSelection(e))})},f=function(e){var n=function(n){return function(){var r=this;e.on("NodeChange",function(e){var o=t.grep(e.parents,i.isListNode);r.active(o.length>0&&o[0].nodeName===n)})}},r=function(e,n){var i=e.settings.plugins?e.settings.plugins:"";return t.inArray(i.split(/[ ,]/),n)!==-1};r(e,"advlist")||(e.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:n("OL")}),e.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:n("UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){var n=t.control;e.on("nodechange",function(){for(var t=e.selection.getSelectedBlocks(),r=!1,o=0,a=t.length;!r&&o<a;o++){var s=t[o].nodeName;r="LI"===s&&i.isFirstChild(t[o])||"UL"===s||"OL"===s||"DD"===s}n.disabled(r)})}})};return e.add("lists",function(e){return f(e),r.setup(e),e.on("init",function(){c(e),u(e),d(e)}),{backspaceDelete:function(t){r.backspaceDelete(e,t)}}}),function(){}}),i("0")()}();